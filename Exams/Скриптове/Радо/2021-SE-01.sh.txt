#!/bin/bash

if [ $(whoami) != "oracle" ] || [ $(whoami) != "oracle"]; then
        echo "You cannot use this command"
        exit 1
fi

command=$ORACLE_HOME/bin/adrci

temp=$(mktemp)
$ORACLE_HOME/bin/adrci -exec="show homes" >> $temp

if [  $(cat "${temp}" | wc -l) -ne 0 ]; then
        sum=0
        while read home; do
                while read file; do
                        sum=$(( sum + $(stat -c "%s" "${file}") ))
                done < <(find "${file}" -mindepth 1 -type f)
                sum=$(( sum/1000000 ))
                echo "${sum} ${home}"
        done < $temp
fi
